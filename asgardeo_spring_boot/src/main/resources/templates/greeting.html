<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8" />
    <title>Greeting</title>
</head>
<body>
<!-- Logout form available only when authenticated -->
<div sec:authorize="isAuthenticated()">
    <form th:action="@{/logout}" method="post">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <button type="submit">Logout</button>
    </form>
</div>


<div sec:authorize="isAuthenticated()">
    <p th:text="|Hello, ${#authentication.principal.attributes['username']}!|"></p>
    <ul>
        <li>Email: <span th:text="${#authentication.principal.attributes['email']}"></span></li>
        <li>First Name: <span th:text="${#authentication.principal.attributes['given_name']}"></span></li>
        <li>Last Name: <span th:text="${#authentication.principal.attributes['family_name']}"></span></li>
    </ul>
</div>


<div sec:authorize="isAnonymous()">
    <a th:href="@{/oauth2/authorization/asgardeo}">Login with Asgardeo</a>
</div>
</body>
</html>